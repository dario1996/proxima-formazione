<div class="table-scroll-container" #scrollContainer>
<table class="table">
    <thead class="table-header">
        <tr>
            <th *ngFor="let col of columns" [style.width]="col.width">{{ col.label }}</th>
            <th *ngIf="azioni.length" class="actions-column text-center">Azioni</th>
        </tr>
    </thead>
    <tbody class="table-body">
        <!-- <tr *ngIf="!loading && data.length === 0">
        <td [attr.colspan]="columns.length + (azioni.length ? 1 : 0)" class="empty-cell">
          Nessun dato disponibile
        </td>
      </tr> -->
        <tr 
            *ngFor="let row of paginatedData" 
            class="align-middle row-clickable"
            (click)="onRowClick(row)"
            >
            <td *ngFor="let col of columns">
                <ng-container [ngSwitch]="col.type">
                    <span *ngSwitchCase="'badge'" class="badge badge-primary">{{ row[col.key] }}</span>
                    <span *ngSwitchCase="'date'">{{ row[col.key] | date:'dd/MM/yyyy' }}</span>
                    <span *ngSwitchDefault>{{ row[col.key] }}</span>
                </ng-container>
            </td>
            <td *ngIf="azioni.length" class="actions-cell" (click)="$event.stopPropagation()">
                <div class="action-buttons">
                    <button *ngFor="let azione of azioni" type="button" class="btn btn-sm" [ngClass]="{
                                    'btn-primary': azione.color === 'primary',
                                    'btn-danger': azione.color === 'danger',
                                    'btn-secondary': azione.color === 'secondary'
                                }" (click)="onAzione(azione.action, row)">
                        <i *ngIf="azione.icon" [class]="azione.icon"></i>
                    </button>
                </div>
            </td>
        </tr>
          <!-- Righe vuote per riempire fino a pageSize -->
        <tr class="empty-rows" *ngFor="let empty of [].constructor(pageSize - paginatedData.length)">
            <td [attr.colspan]="columns.length + (azioni.length ? 1 : 0)">&nbsp;</td>
        </tr>
    </tbody>
</table>

<div class="table-footer">
    <!-- PAGINATION -->
    <nav *ngIf="totalPages > 1" class="table-pagination">
        <div class="table-pagination-inner">
        <!-- <ul class="pagination mb-0">
        <li class="page-item" [class.disabled]="currentPage === 1">
            <button class="page-link" (click)="goTo(currentPage - 1)">«</button>
        </li>
        <li class="page-item"
            *ngFor="let p of [].constructor(totalPages); let i = index"
            [class.active]="currentPage === i + 1">
            <button class="page-link" (click)="goTo(i + 1)">{{ i + 1 }}</button>
        </li>
        <li class="page-item" [class.disabled]="currentPage === totalPages">
            <button class="page-link" (click)="goTo(currentPage + 1)">»</button>
        </li>
        </ul> -->

        <ul class="pagination mb-0">
            <li class="page-item" [class.disabled]="currentPage === 1">
                <button class="page-link" (click)="goTo(currentPage - 1)">«</button>
            </li>
            <li *ngFor="let p of pages" class="page-item" [class.active]="p === currentPage">
                <button class="page-link" (click)="goTo(p)">{{ p }}</button>
            </li>
            <li class="page-item" [class.disabled]="currentPage === totalPages">
                <button class="page-link" (click)="goTo(currentPage + 1)">»</button>
            </li>
        </ul>
        <!-- ({{ totalItems }} record) -->
        <span class="pagination-info d-none d-md-inline">
                Pagina {{ currentPage }} di {{ totalPages }} 
        </span>
        </div>
    </nav>
</div>
</div>
