<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <div class="row">
    <!-- Sezione Dipendente - Sinistra -->
    <div class="col-md-6">
      <div class="section-header">
        <h5 class="section-title">Seleziona Dipendente</h5>
      </div>
      
      <div class="form-field">
        <label for="searchDipendente" class="form-label p-0 m-0">Cerca Dipendente</label>
        <div class="search-container">
          <input 
            id="searchDipendente" 
            type="text" 
            class="form-control searchable-dropdown-input" 
            formControlName="searchDipendente"
            placeholder="Digita nome, email o ruolo..."
            (focus)="showDipendentiDropdown = true"
            (blur)="onDipendenteBlur()"
            [ngClass]="{ 'is-invalid': form.get('dipendenteId')?.invalid && form.get('dipendenteId')?.touched }" />
          
          <i class="fas fa-chevron-down dropdown-arrow" 
             [class.rotated]="showDipendentiDropdown"></i>
          
          <button 
            *ngIf="dipendenteSelezionato" 
            type="button" 
            class="btn btn-outline-secondary clear-btn"
            (click)="clearDipendente()">
            <i class="fas fa-times"></i>
          </button>
          
          <!-- Dropdown dipendenti -->
          <div *ngIf="showDipendentiDropdown && dipendentiFiltrati.length > 0" 
               class="search-dropdown position-absolute w-100">
            <div *ngFor="let dipendente of dipendentiFiltrati.slice(0, 10)" 
                 class="search-dropdown-item p-3 cursor-pointer"
                 (mousedown)="selezionaDipendente(dipendente)">
              <div class="d-flex justify-content-between align-items-start">
                <div class="flex-grow-1">
                  <div class="fw-bold text-primary">
                    {{ dipendente.nome }} {{ dipendente.cognome }}
                  </div>
                  <div class="text-muted small">{{ dipendente.email }}</div>
                  <div class="text-secondary small">{{ dipendente.ruolo }}</div>
                </div>
              </div>
            </div>
          </div>
          
          <div *ngIf="showDipendentiDropdown && dipendentiFiltrati.length === 0" 
               class="search-dropdown position-absolute w-100">
            <div class="search-dropdown-item p-3 text-muted">
              Nessun dipendente trovato
            </div>
          </div>
        </div>
        
        <div *ngIf="form.get('dipendenteId')?.invalid && form.get('dipendenteId')?.touched" 
             class="invalid-feedback">
          Seleziona un dipendente.
        </div>
      </div>
      
      <!-- Dettagli dipendente selezionato -->
      <div *ngIf="dipendenteSelezionato" class="selected-item-card mt-3">
        <div class="card">
          <div class="card-header bg-primary text-white">
            <h6 class="mb-0">
              <i class="fas fa-user me-2"></i>
              Dipendente Selezionato
            </h6>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-12">
                <strong>{{ dipendenteSelezionato.nome }} {{ dipendenteSelezionato.cognome }}</strong>
              </div>
              <div class="col-12 text-muted small">
                <i class="fas fa-envelope me-1"></i>
                {{ dipendenteSelezionato.email }}
              </div>
              <div class="col-12 text-muted small">
                <i class="fas fa-briefcase me-1"></i>
                {{ dipendenteSelezionato.ruolo }}
              </div>
              <div class="col-12 text-muted small" *ngIf="dipendenteSelezionato.reparto">
                <i class="fas fa-building me-1"></i>
                {{ dipendenteSelezionato.reparto }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Sezione Corso - Destra -->
    <div class="col-md-6">
      <div class="section-header">
        <h5 class="section-title">Seleziona Corso</h5>
      </div>
      
      <div class="form-field">
        <label for="searchCorso" class="form-label p-0 m-0">Cerca Corso</label>
        <div class="search-container">
          <input 
            id="searchCorso" 
            type="text" 
            class="form-control searchable-dropdown-input" 
            formControlName="searchCorso"
            placeholder="Digita titolo, macro-argomento o modalitÃ ..."
            (focus)="showCorsiDropdown = true"
            (blur)="onCorsoBlur()"
            [ngClass]="{ 'is-invalid': form.get('corsoId')?.invalid && form.get('corsoId')?.touched }" />
          
          <i class="fas fa-chevron-down dropdown-arrow" 
             [class.rotated]="showCorsiDropdown"></i>
          
          <button 
            *ngIf="corsoSelezionato" 
            type="button" 
            class="btn btn-outline-secondary clear-btn"
            (click)="clearCorso()">
            <i class="fas fa-times"></i>
          </button>
          
          <!-- Dropdown corsi -->
          <div *ngIf="showCorsiDropdown && corsiFiltrati.length > 0" 
               class="search-dropdown position-absolute w-100">
            <div *ngFor="let corso of corsiFiltrati.slice(0, 10)" 
                 class="search-dropdown-item p-3 cursor-pointer"
                 (mousedown)="selezionaCorso(corso)">
              <div class="d-flex justify-content-between align-items-start">
                <div class="flex-grow-1">
                  <div class="fw-bold text-success">
                    {{ corso.nome }}
                  </div>
                  <div class="text-muted small" *ngIf="corso.argomento">
                    <i class="fas fa-tag me-1"></i>
                    {{ corso.argomento }}
                  </div>
                  <div class="text-secondary small" *ngIf="corso.piattaforma">
                    <i class="fas fa-laptop me-1"></i>
                    {{ corso.piattaforma }}
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div *ngIf="showCorsiDropdown && corsiFiltrati.length === 0" 
               class="search-dropdown position-absolute w-100">
            <div class="search-dropdown-item p-3 text-muted">
              Nessun corso trovato
            </div>
          </div>
        </div>
        
        <div *ngIf="form.get('corsoId')?.invalid && form.get('corsoId')?.touched" 
             class="invalid-feedback">
          Seleziona un corso.
        </div>
      </div>
      
      <!-- Dettagli corso selezionato -->
      <div *ngIf="corsoSelezionato" class="selected-item-card mt-3">
        <div class="card">
          <div class="card-header bg-success text-white">
            <h6 class="mb-0">
              <i class="fas fa-graduation-cap me-2"></i>
              Corso Selezionato
            </h6>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-12">
                <strong>{{ corsoSelezionato.nome }}</strong>
              </div>
              <div class="col-12 text-muted small" *ngIf="corsoSelezionato.argomento">
                <i class="fas fa-tag me-1"></i>
                {{ corsoSelezionato.argomento }}
              </div>
              <div class="col-12 text-muted small" *ngIf="corsoSelezionato.piattaforma">
                <i class="fas fa-laptop me-1"></i>
                {{ corsoSelezionato.piattaforma }}
              </div>
              <div class="col-12 text-muted small" *ngIf="corsoSelezionato.durata">
                <i class="fas fa-clock me-1"></i>
                {{ corsoSelezionato.durata }} ore
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>