import{a as B}from"./chunk-JEHAD364.js";import"./chunk-MDR7SPQX.js";import{b as j,d as q,e as W,f as z,g as F,h as O,o as D,q as $}from"./chunk-CFXI2MN7.js";import{l as A,n as P,o as R,q as T}from"./chunk-5GV7RPBB.js";import{b as N}from"./chunk-OE42I5PZ.js";import{a as G}from"./chunk-DVYNNE2R.js";import"./chunk-UK3UKNHR.js";import"./chunk-AHKA4FOS.js";import{$a as E,Db as x,Eb as u,Kb as r,La as l,Mb as f,Ob as _,Pb as b,Qb as C,Ra as g,Wa as S,ca as p,da as c,dc as k,lb as I,n as v,oa as y,pb as L,s as w,tb as t,ub as i,vb as a,yb as V}from"./chunk-3I64RZE3.js";function H(o,M){if(o&1&&(t(0,"div",29),r(1),i()),o&2){let e=u();l(),f(" ",e.errMsg," ")}}function J(o,M){if(o&1&&(t(0,"div",29),r(1),i()),o&2){let e=u();l(),f(" ",e.errMsg2," ")}}function K(o,M){if(o&1&&(t(0,"div",29),r(1),i()),o&2){let e=u();l(),f(" ",e.errMsg3," ")}}var ae=(()=>{class o{constructor(e,m,n){this.route=e,this.activeRoute=m,this.Auth=n,this.titolo="Login",this.userId="",this.password="",this.autenticato=y(!1),this.viewMsg=!1,this.notlogged=!1,this.expired=!1,this.nologged$=v(""),this.expired$=v(""),this.errMsg="Spiacente, la userid o la password sono errati!",this.errMsg2="Spiacente, devi autenticarti per poter accedere alla pagina selezionata!",this.errMsg3="Sessione Scaduta! Eserguire nuovamente l'accesso!",this.loggingEffect=k(()=>{console.log(`Lo stato di autenticazione \xE8: (${this.autenticato()})`),this.autenticato()&&this.route.navigate(["smart-control"])}),this.gestAuth=()=>{this.expired=!1,this.notlogged=!1,this.viewMsg=!1,this.Auth.autenticaService(this.userId,this.password).subscribe({next:s=>{console.log(s),this.autenticato.set(!0)},error:s=>{console.log(s),this.viewMsg=!0,this.autenticato.set(!1)}})}}ngOnInit(){this.nologged$=this.activeRoute.queryParamMap.pipe(w(e=>e.get("nologged"))),this.nologged$.subscribe(e=>e?this.notlogged=!0:this.notlogged=!1),this.expired$=this.activeRoute.queryParamMap.pipe(w(e=>e.get("expired"))),this.expired$.subscribe(e=>e?this.expired=!0:this.expired=!1)}annulla(){this.userId="",this.password=""}static{this.\u0275fac=function(m){return new(m||o)(g(P),g(A),g(N))}}static{this.\u0275cmp=S({type:o,selectors:[["app-login"]],decls:41,vars:4,consts:[["myForm","ngForm"],[1,"container-fluid"],[3,"title"],[1,"row"],[1,"col-12","d-flex","justify-content-center","align-items-start","mt-5"],[1,"w-100",2,"max-width","600px",3,"ngSubmit"],[1,"card","shadow-lg","p-3"],[1,"card-header","text-center","sc-primary","fw-bold","fs-4"],[1,"card-body"],[1,"mb-4"],[1,"input-group"],[1,"input-group-text"],[1,"fas","fa-user"],["type","text","id","username","name","username","required","","placeholder","Inserisci username",1,"form-control","form-control-default",3,"ngModelChange","ngModel"],[1,"mb-3"],[1,"fas","fa-key"],["type","password","id","password","name","password","required","","placeholder","Inserisci password",1,"form-control","form-control-default",3,"ngModelChange","ngModel"],[1,"text-center","mb-3"],["href","#",1,"text-primary","text-decoration-none"],[1,"fas","fa-question-circle","me-1"],[1,"text-center","mb-4"],[1,"text-muted","me-2"],["routerLink","/signup",1,"text-primary","text-decoration-none"],[1,"fas","fa-user-plus","me-1"],[1,"d-flex","justify-content-between","mb-3"],["type","submit",1,"btn","btn-primary","btn-sm","w-100","me-2"],[1,"fas","fa-sign-in-alt","me-1"],["type","button",1,"btn","btn-secondary","btn-sm","w-100",3,"click"],[1,"fas","fa-times","me-1"],["role","alert",1,"alert","alert-danger"]],template:function(m,n){if(m&1){let s=V();t(0,"div",1),a(1,"app-external-header",2),t(2,"div",3)(3,"div",4)(4,"form",5,0),x("ngSubmit",function(){return p(s),c(n.gestAuth())}),t(6,"div",6)(7,"div",7),r(8," Accesso al sistema "),i(),t(9,"div",8)(10,"div",9)(11,"div",10)(12,"span",11),a(13,"i",12),i(),t(14,"input",13),C("ngModelChange",function(d){return p(s),b(n.userId,d)||(n.userId=d),c(d)}),i()()(),t(15,"div",14)(16,"div",10)(17,"span",11),a(18,"i",15),i(),t(19,"input",16),C("ngModelChange",function(d){return p(s),b(n.password,d)||(n.password=d),c(d)}),i()()(),t(20,"div",17)(21,"a",18),a(22,"i",19),r(23," Password dimenticata? "),i()(),t(24,"div",20)(25,"span",21),r(26,"Non hai un account?"),i(),t(27,"a",22),a(28,"i",23),r(29," Registrati "),i()(),t(30,"div",24)(31,"button",25),a(32,"i",26),r(33," Accedi "),i(),t(34,"button",27),x("click",function(){return p(s),c(n.annulla())}),a(35,"i",28),r(36," Annulla "),i()(),a(37,"app-spinner"),E(38,H,2,1,"div",29)(39,J,2,1,"div",29)(40,K,2,1,"div",29),i()()()()()()}m&2&&(l(),I("title",n.titolo),l(13),_("ngModel",n.userId),l(5),_("ngModel",n.password),l(19),L(n.viewMsg?38:n.notlogged?39:n.expired?40:-1))},dependencies:[T,R,B,G,$,O,j,q,W,D,F,z],styles:[".alert[_ngcontent-%COMP%]{margin-top:2%}.background-img[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-image:url(/assets/images/light-bulb-with-drawing-graph.jpg);background-size:cover;background-position:center;background-repeat:no-repeat;z-index:-1}.form-container[_ngcontent-%COMP%]{position:relative;z-index:1}.margin[_ngcontent-%COMP%]{padding-top:8%}"]})}}return o})();export{ae as LoginComponent};
