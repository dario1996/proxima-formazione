import{f as p,g as m,k as i}from"./chunk-ASJDV4BH.js";import{S as n,X as h,s as a}from"./chunk-LKX4623Y.js";var u=(()=>{class t{constructor(){this.cookieStore={},this.clear=()=>{this.parseCookies(document.cookie,!0)},this.parseCookies(document.cookie,!1)}parseCookies(e=document.cookie,o){if(this.cookieStore={},!e)return;let r=e.split(";");for(let s of r){let c=s.split("=");o?this.remove(c[0].trim()):this.cookieStore[c[0].trim()]=c[1]}}get(e){return this.parseCookies(document.cookie,!1),this.cookieStore[e]?this.cookieStore[e]:null}remove(e){document.cookie=`${e} = ; expires=Thu, 1 jan 1990 12:00:00 UTC; path=/`}set(e,o){document.cookie=e+"="+(o||"")}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var d=(()=>{class t{constructor(e,o){this.httpClient=e,this.storageService=o,this.server=i.server,this.port=i.negozioServicePort,this.refreshToken=r=>(console.log("Esecuzione Refresh Token"),this.httpClient.get(`${i.authServerUri}`,{headers:new p({Authorization:r})}).pipe(a(s=>(this.storageService.set("AuthToken",s.token),s)))),this.getAuthToken=()=>{let r="";return r=this.storageService.get("AuthToken"),r||""},this.loggedUser=()=>sessionStorage.getItem("Utente")?sessionStorage.getItem("Utente"):"",this.isLogged=()=>!!sessionStorage.getItem("Utente"),this.clearUser=()=>sessionStorage.removeItem("Utente"),this.clearAll=()=>{this.storageService.clear(),sessionStorage.clear()}}autenticaService(e,o){return this.httpClient.post(`${i.authServerUri}`,{username:e,password:o}).pipe(a(r=>(sessionStorage.setItem("Utente",e),this.storageService.set("AuthToken",r.token),r)))}static{this.\u0275fac=function(o){return new(o||t)(h(m),h(u))}}static{this.\u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();export{u as a,d as b};
